# æ£€æŸ¥ä»£ç åŒæ­¥å’Œè§¦å‘æ„å»º

**æ—¶é—´**: 2026-01-19  
**çŠ¶æ€**: æ£€æŸ¥ä¸­

## ğŸ” æ£€æŸ¥ç»“æœ

### 1. Jenkins Job é…ç½®æ£€æŸ¥

**æ£€æŸ¥é¡¹**: Job é…ç½®æ–‡ä»¶æ˜¯å¦å­˜åœ¨

**å‘½ä»¤**:
```bash
docker exec jenkins_hwfa-jenkins_hWFA-1 test -f /var/jenkins_home/jobs/suntaya-server-blog/config.xml
```

**çŠ¶æ€**: â³ æ£€æŸ¥ä¸­...

---

### 2. å·¥ä½œåŒºæ£€æŸ¥

**æ£€æŸ¥é¡¹**: é¡¹ç›®ä»£ç æ˜¯å¦å·²åŒæ­¥åˆ° Jenkins å·¥ä½œåŒº

**è¯´æ˜**: 
- Jenkins åœ¨æ„å»ºæ—¶ä¼šè‡ªåŠ¨ä» GitHub æ‹‰å–ä»£ç 
- å·¥ä½œåŒº (`workspace`) åªåœ¨æ„å»ºæ—¶åˆ›å»º
- å¦‚æœè¿˜æ²¡æœ‰æ„å»ºè¿‡ï¼Œå·¥ä½œåŒºå¯èƒ½ä¸å­˜åœ¨

**çŠ¶æ€**: â³ éœ€è¦è§¦å‘æ„å»ºåæ£€æŸ¥

---

### 3. è§¦å‘æ„å»º

**æ–¹æ³• 1: é€šè¿‡ Web UIï¼ˆæ¨èï¼‰**

1. **è®¿é—® Jenkins**: http://115.190.54.220:14808
2. **è¿›å…¥ Job**: ç‚¹å‡» `suntaya-server-blog`
3. **è§¦å‘æ„å»º**: ç‚¹å‡»å·¦ä¾§èœå•çš„ **Build Now**ï¼ˆç«‹å³æ„å»ºï¼‰

**æ–¹æ³• 2: é€šè¿‡ APIï¼ˆéœ€è¦è®¤è¯ï¼‰**

```bash
# è·å– Crumb Token
CRUMB=$(curl -s 'http://115.190.54.220:14808/crumbIssuer/api/xml?xpath=concat(//crumbRequestField,":",//crumb)' --user admin:PASSWORD)

# è§¦å‘æ„å»º
curl -X POST http://115.190.54.220:14808/job/suntaya-server-blog/build \
  -H "$CRUMB" \
  --user admin:PASSWORD
```

---

## ğŸ“‹ éªŒè¯æ­¥éª¤

### æ­¥éª¤ 1: è§¦å‘æ„å»º

åœ¨ Jenkins Web UI ä¸­ç‚¹å‡» **Build Now**

### æ­¥éª¤ 2: è§‚å¯Ÿæ„å»ºè¿‡ç¨‹

1. **æŸ¥çœ‹æ„å»ºé˜Ÿåˆ—**: æ„å»ºä¼šå‡ºç°åœ¨å·¦ä¾§çš„æ„å»ºå†å²ä¸­
2. **ç‚¹å‡»æ„å»ºå·**: å¦‚ `#1` æˆ– `#2`
3. **æŸ¥çœ‹ Console Output**: è§‚å¯Ÿæ„å»ºæ—¥å¿—

### æ­¥éª¤ 3: æ£€æŸ¥ä»£ç åŒæ­¥

æ„å»ºæ—¥å¿—ä¸­åº”è¯¥çœ‹åˆ°ï¼š

```
[Pipeline] checkout
Cloning repository git@github.com:slk1061569042-lab/suntaya_server_blog.git
Checking out branch main
```

å¦‚æœçœ‹åˆ°è¿™ä¸ªï¼Œè¯´æ˜ä»£ç å·²æˆåŠŸä» GitHub åŒæ­¥ã€‚

### æ­¥éª¤ 4: éªŒè¯ Jenkinsfile

æ„å»ºæ—¥å¿—ä¸­åº”è¯¥çœ‹åˆ°ï¼š

```
[Pipeline] stage
[Pipeline] { (Checkout)
[Pipeline] stage
[Pipeline] { (Install Dependencies)
```

å¦‚æœçœ‹åˆ°è¿™äº›é˜¶æ®µï¼Œè¯´æ˜ Jenkinsfile å·²æ­£ç¡®åŠ è½½ã€‚

---

## ğŸ” å¦‚æœæ„å»ºå¤±è´¥

### å¸¸è§é—®é¢˜

1. **ä»£ç æ‹‰å–å¤±è´¥**:
   - æ£€æŸ¥ Credential æ˜¯å¦æ­£ç¡®
   - æ£€æŸ¥ SSH Config å’Œ Known Hosts

2. **æ’ä»¶é”™è¯¯**:
   - å¦‚æœçœ‹åˆ° `Invalid agent type "docker"`
   - æ£€æŸ¥æ’ä»¶æ˜¯å¦å·²æ­£ç¡®åŠ è½½

3. **æ„å»ºå¤±è´¥**:
   - æŸ¥çœ‹å…·ä½“çš„é”™è¯¯ä¿¡æ¯
   - å‘Šè¯‰æˆ‘é”™è¯¯å†…å®¹ï¼Œæˆ‘ä¼šå¸®ä½ è§£å†³

---

**æç¤º**: æœ€ç®€å•çš„æ–¹æ³•æ˜¯åœ¨ Jenkins Web UI ä¸­ç‚¹å‡» **Build Now** è§¦å‘æ„å»ºã€‚æ„å»ºå¼€å§‹åï¼Œä»£ç ä¼šè‡ªåŠ¨ä» GitHub åŒæ­¥åˆ° Jenkins å·¥ä½œåŒºã€‚
