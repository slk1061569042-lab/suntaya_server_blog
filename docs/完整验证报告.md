# å®Œæ•´éªŒè¯æŠ¥å‘Š

**æ—¶é—´**: 2026-01-19  
**éªŒè¯äºº**: AI Assistant  
**é¡¹ç›®**: suntaya_server_blog è‡ªåŠ¨éƒ¨ç½²

## âœ… å·²éªŒè¯é€šè¿‡çš„é…ç½®

### 1. GitHub é…ç½® âœ…

| é¡¹ç›® | çŠ¶æ€ | éªŒè¯ç»“æœ |
|------|------|----------|
| SSH å…¬é’¥ | âœ… | å·²æ·»åŠ åˆ° GitHub |
| Webhook | âœ… | å·²é…ç½®ï¼ŒURL: `http://115.190.54.220:14808/github-webhook/` |
| ä»“åº“è®¿é—® | âœ… | æœ¬åœ°å¯ä»¥æ­£å¸¸æ¨é€ |

### 2. Jenkins â†’ GitHub è¿æ¥ âœ…

| é¡¹ç›® | çŠ¶æ€ | éªŒè¯ç»“æœ |
|------|------|----------|
| Repository URL | âœ… | `git@github.com:slk1061569042-lab/suntaya_server_blog.git` |
| Branch | âœ… | `*/main` |
| Credential | âœ… | `github-ssh-key` å·²é…ç½® |
| SSH Config | âœ… | `/var/jenkins_home/.ssh/config` å·²åˆ›å»º |
| Known Hosts | âœ… | GitHub ä¸»æœºå¯†é’¥å·²æ·»åŠ  |

**éªŒè¯å‘½ä»¤ç»“æœ**:
```
SSH Config:
Host github.com-new
    Hostname github.com
    User git
    StrictHostKeyChecking no

Known Hosts:
github.com ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOMqqnkVzrm0SdG6UOoqKLsabgH5C9okWi0dh2l9GKJl
```

### 3. Jenkins æ’ä»¶ âœ…

| æ’ä»¶ | çŠ¶æ€ | æ–‡ä»¶å¤§å° | éªŒè¯ç»“æœ |
|------|------|----------|----------|
| Docker Pipeline | âœ… | 115KB | æ–‡ä»¶å­˜åœ¨ï¼Œå·²è§£å‹ |
| Docker Commons | âœ… | 97KB | æ–‡ä»¶å­˜åœ¨ï¼Œå·²è§£å‹ |
| Authentication Tokens | âœ… | 15KB | æ–‡ä»¶å­˜åœ¨ï¼Œå·²è§£å‹ |

**éªŒè¯ç»“æœ**:
- æ‰€æœ‰æ’ä»¶æ–‡ä»¶éƒ½å­˜åœ¨
- æ’ä»¶å·²è§£å‹åˆ°ç›®å½•ï¼ˆè¯´æ˜ Jenkins å·²åŠ è½½ï¼‰

### 4. Docker ç¯å¢ƒ âœ…

| é¡¹ç›® | çŠ¶æ€ | éªŒè¯ç»“æœ |
|------|------|----------|
| Docker ç‰ˆæœ¬ | âœ… | Docker version 29.1.3 |
| Docker å¯ç”¨æ€§ | âœ… | Jenkins å®¹å™¨å†…å¯ä»¥æ‰§è¡Œ docker å‘½ä»¤ |

### 5. Jenkinsfile âœ…

| é¡¹ç›® | çŠ¶æ€ | éªŒè¯ç»“æœ |
|------|------|----------|
| Agent é…ç½® | âœ… | `agent { docker { image 'node:18-alpine' } }` |
| è¿œç¨‹ç‰ˆæœ¬ | âœ… | å·²æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼ˆä¸æœ¬åœ°ä¸€è‡´ï¼‰ |
| è¯­æ³•æ­£ç¡®æ€§ | âœ… | å·²ç§»é™¤æ‰€æœ‰ `docker run` å‘½ä»¤ |

### 6. éƒ¨ç½²é…ç½® âœ…

| é¡¹ç›® | çŠ¶æ€ | éªŒè¯ç»“æœ |
|------|------|----------|
| éƒ¨ç½²ç›®å½• | âœ… | `/www/wwwroot/next.sunyas.com` å­˜åœ¨ |
| ç›®å½•æƒé™ | âœ… | ç›®å½•å¯å†™ |
| Publish Over SSH | âœ… | `main-server` å·²é…ç½® |

**éªŒè¯ç»“æœ**:
```
ç›®å½•å†…å®¹:
drwxr-xr-x 3 www  www  4096 Jan 12 17:07 .
-rwxr-xr-x 1 www  www   138 Jan  9 16:24 404.html
-rwxr-xr-x 1 www  www   917 Jan  9 16:24 index.html
```

---

## â³ å¾…æµ‹è¯•çš„é¡¹ç›®

### 1. æ’ä»¶ä¾èµ–çŠ¶æ€

**çŠ¶æ€**: âš ï¸ éœ€è¦éªŒè¯

**éªŒè¯æ–¹æ³•**: 
1. è®¿é—® Jenkins: http://115.190.54.220:14808
2. Manage Jenkins â†’ Manage Plugins â†’ Installed
3. æ£€æŸ¥æ˜¯å¦è¿˜æœ‰ä¾èµ–é”™è¯¯

**é¢„æœŸç»“æœ**: ä¸åº”è¯¥æœ‰ä¾èµ–é”™è¯¯

---

### 2. æ„å»ºæµç¨‹

**çŠ¶æ€**: â³ å¾…æµ‹è¯•

**æµ‹è¯•æ­¥éª¤**:
1. åœ¨ Jenkins ä¸­ç‚¹å‡» "Build Now"
2. è§‚å¯Ÿæ„å»ºæ—¥å¿—
3. éªŒè¯æ¯ä¸ªé˜¶æ®µæ˜¯å¦æˆåŠŸ

**é¢„æœŸç»“æœ**:
- âœ… Stage 1: Checkout æˆåŠŸ
- âœ… Stage 2: Install Dependencies æˆåŠŸ
- âœ… Stage 3: Lint æˆåŠŸï¼ˆæˆ–è·³è¿‡ï¼‰
- âœ… Stage 4: Build Next.js æˆåŠŸ
- âœ… Stage 5: Export static site æˆåŠŸ
- âœ… Stage 6: Deploy æˆåŠŸ

---

### 3. è‡ªåŠ¨è§¦å‘

**çŠ¶æ€**: â³ å¾…æµ‹è¯•

**æµ‹è¯•æ­¥éª¤**:
1. æ¨é€ä»£ç åˆ° GitHubï¼ˆéœ€è¦å…ˆè§£å†³æ¨é€é—®é¢˜ï¼‰
2. è§‚å¯Ÿ Jenkins æ˜¯å¦è‡ªåŠ¨è§¦å‘æ„å»º
3. æ£€æŸ¥ Webhook äº¤ä»˜çŠ¶æ€

**æ³¨æ„**: å½“å‰æ¨é€è¢«é˜»æ­¢ï¼ˆå†å²æäº¤ä¸­æœ‰ç§é’¥ï¼‰ï¼Œä½†ä¸å½±å“æ‰‹åŠ¨è§¦å‘æ„å»ºæµ‹è¯•ã€‚

---

## ğŸ¯ ç«‹å³æµ‹è¯•

### ç°åœ¨å°±å¯ä»¥æµ‹è¯•

ç”±äº Jenkinsfile å·²ç»åœ¨è¿œç¨‹æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œ**å¯ä»¥ç›´æ¥åœ¨ Jenkins ä¸­è§¦å‘æ„å»ºæµ‹è¯•**ï¼Œä¸éœ€è¦ç­‰å¾…æ¨é€ã€‚

### æµ‹è¯•æ­¥éª¤

1. **è®¿é—® Jenkins**: http://115.190.54.220:14808
2. **è¿›å…¥ Job**: ç‚¹å‡» `suntaya-server-blog`
3. **è§¦å‘æ„å»º**: ç‚¹å‡» **Build Now**ï¼ˆç«‹å³æ„å»ºï¼‰
4. **æŸ¥çœ‹æ„å»ºæ—¥å¿—**: ç‚¹å‡»æ„å»ºå· â†’ Console Output
5. **è§‚å¯Ÿæ„å»ºè¿‡ç¨‹**: ç¡®è®¤æ¯ä¸ªé˜¶æ®µæ˜¯å¦æˆåŠŸ

---

## ğŸ“Š éªŒè¯çŠ¶æ€æ±‡æ€»

### âœ… å·²éªŒè¯é€šè¿‡ï¼ˆ10/13ï¼‰

1. âœ… GitHub SSH å…¬é’¥
2. âœ… GitHub Webhook
3. âœ… Jenkins Repository URL
4. âœ… Jenkins Branch
5. âœ… Jenkins Credential
6. âœ… SSH Config
7. âœ… Known Hosts
8. âœ… Docker ç¯å¢ƒ
9. âœ… Jenkinsfile
10. âœ… éƒ¨ç½²ç›®å½•

### âš ï¸ å¾…éªŒè¯ï¼ˆ3/13ï¼‰

1. âš ï¸ æ’ä»¶ä¾èµ–çŠ¶æ€ï¼ˆéœ€è¦åœ¨ Web UI ä¸­æ£€æŸ¥ï¼‰
2. â³ æ„å»ºæµç¨‹ï¼ˆéœ€è¦è§¦å‘æ„å»ºæµ‹è¯•ï¼‰
3. â³ è‡ªåŠ¨è§¦å‘ï¼ˆéœ€è¦æ¨é€ä»£ç æµ‹è¯•ï¼‰

---

**æç¤º**: æ‰€æœ‰åŸºç¡€é…ç½®å·²éªŒè¯é€šè¿‡ï¼Œå¯ä»¥ç›´æ¥åœ¨ Jenkins ä¸­è§¦å‘æ„å»ºæµ‹è¯•ã€‚å¦‚æœæ„å»ºå¤±è´¥ï¼Œå‘Šè¯‰æˆ‘å…·ä½“çš„é”™è¯¯ä¿¡æ¯ã€‚
