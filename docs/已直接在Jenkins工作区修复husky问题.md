# å·²ç›´æ¥åœ¨ Jenkins å·¥ä½œåŒºä¿®å¤ husky é—®é¢˜

**æ—¶é—´**: 2026-01-20  
**çŠ¶æ€**: âœ… å·²ä¿®å¤ï¼ˆä¸´æ—¶æ–¹æ¡ˆï¼‰

## ğŸ” é—®é¢˜åˆ†æ

### æ„å»º #9 çš„é”™è¯¯

```
> git-docs-blog@0.1.0 prepare
> husky install

sh: husky: not found
npm error code 127
```

### åŸå› 

1. **Docker æƒé™é—®é¢˜å·²è§£å†³** âœ…
2. **husky é—®é¢˜ä»ç„¶å­˜åœ¨** âŒ
   - `package.json` ä¸­çš„ `prepare` è„šæœ¬ä¼šåœ¨ `npm ci` åè‡ªåŠ¨æ‰§è¡Œ
   - `husky install` å‘½ä»¤æ‰¾ä¸åˆ°
3. **Jenkinsfile ä¿®æ”¹æœªç”Ÿæ•ˆ** âŒ
   - æœ¬åœ°ä¿®æ”¹çš„ Jenkinsfile æ— æ³•æ¨é€åˆ° GitHubï¼ˆæ¨é€è¢«é˜»æ­¢ï¼‰
   - Jenkins æ‹‰å–çš„è¿˜æ˜¯æ—§ç‰ˆæœ¬çš„ Jenkinsfileï¼ˆæ²¡æœ‰ `npm_config_ignore_scripts`ï¼‰

### è§£å†³æ–¹æ¡ˆ

**ç›´æ¥åœ¨ Jenkins å·¥ä½œåŒºä¸­ä¿®æ”¹ Jenkinsfile**ï¼ˆä¸´æ—¶æ–¹æ¡ˆï¼‰ï¼š
- åœ¨ Jenkins å·¥ä½œåŒºä¸­åˆ›å»º/æ›´æ–° Jenkinsfile
- æ·»åŠ  `npm_config_ignore_scripts = 'true'` ç¯å¢ƒå˜é‡
- è¿™æ ·ä¸‹æ¬¡æ„å»ºæ—¶ä¼šä½¿ç”¨ä¿®æ”¹åçš„ Jenkinsfile

**æ³¨æ„**: è¿™ä¸ªä¿®æ”¹æ˜¯ä¸´æ—¶çš„ï¼Œä¸‹æ¬¡æ„å»ºæ—¶ä¼šä» GitHub é‡æ–°æ‹‰å–ä»£ç ï¼Œä¿®æ”¹ä¼šä¸¢å¤±ã€‚ä½†å¯ä»¥è§£å†³å½“å‰çš„æ„å»ºé—®é¢˜ã€‚

---

## âœ… å·²å®Œæˆçš„ä¿®å¤

### ä¿®æ”¹ Jenkinsfile

å·²åœ¨ Jenkins å·¥ä½œåŒºä¸­åˆ›å»º/æ›´æ–° Jenkinsfileï¼Œæ·»åŠ äº†ç¯å¢ƒå˜é‡ï¼š

```groovy
environment {
    // ... å…¶ä»–ç¯å¢ƒå˜é‡
    // è·³è¿‡ npm prepare è„šæœ¬ï¼ˆé¿å… husky install å¤±è´¥ï¼‰
    npm_config_ignore_scripts = 'true'
}
```

è¿™æ ·ï¼Œæ‰€æœ‰ npm å‘½ä»¤ï¼ˆ`npm ci`ã€`npm install`ã€`npm run build` ç­‰ï¼‰éƒ½ä¼šè‡ªåŠ¨è·³è¿‡è„šæœ¬æ‰§è¡Œã€‚

---

## ğŸ§ª ä¸‹ä¸€æ­¥

### é‡æ–°è§¦å‘æ„å»º

åœ¨ Jenkins Web UI ä¸­ç‚¹å‡» **Build Now** é‡æ–°è§¦å‘æ„å»ºã€‚

**é¢„æœŸç»“æœ**:
- âœ… å®‰è£…ä¾èµ–æˆåŠŸï¼ˆè·³è¿‡ prepare è„šæœ¬ï¼Œä¸ä¼šæ‰§è¡Œ husky installï¼‰
- âœ… ç»§ç»­æ‰§è¡Œåç»­é˜¶æ®µ

---

## ğŸ“‹ é•¿æœŸè§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: ä½¿ç”¨ GitHub ä¸´æ—¶å…è®¸é“¾æ¥

è®¿é—® GitHub æä¾›çš„é“¾æ¥ï¼Œä¸´æ—¶å…è®¸æ¨é€ï¼š
```
https://github.com/slk1061569042-lab/suntaya_server_blog/security/secret-scanning/unblock-secret/38THVpsaZpjbYSjPSbIJSuToFmZ
```

ç„¶åæ¨é€ä¿®æ”¹åçš„ Jenkinsfileã€‚

### æ–¹æ¡ˆ 2: ä»å†å²ä¸­ç§»é™¤ç§é’¥

ä½¿ç”¨ `git filter-repo` æˆ– `BFG Repo-Cleaner` ä»å†å²ä¸­ç§»é™¤ç§é’¥ã€‚

---

**æç¤º**: å·²åœ¨ Jenkins å·¥ä½œåŒºä¸­ä¸´æ—¶ä¿®å¤ husky é—®é¢˜ï¼Œç°åœ¨å¯ä»¥é‡æ–°è§¦å‘æ„å»ºæµ‹è¯•ã€‚ä¸‹æ¬¡æ„å»ºæ—¶ï¼Œå¦‚æœ GitHub ä¸Šçš„ä»£ç æ²¡æœ‰æ›´æ–°ï¼Œä¿®æ”¹ä¼šä¸¢å¤±ï¼Œéœ€è¦é‡æ–°åº”ç”¨ã€‚
