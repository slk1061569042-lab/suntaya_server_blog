# æ„å»ºå¤±è´¥ - å·²ä¿®å¤ husky é—®é¢˜

**æ—¶é—´**: 2026-01-20  
**çŠ¶æ€**: âœ… å·²ä¿®å¤

## ğŸ” é—®é¢˜åˆ†æ

### æ„å»º #7 çš„é”™è¯¯

```
> git-docs-blog@0.1.0 prepare
> husky install

sh: husky: not found
npm error code 127
```

### åŸå› 

1. **Docker æƒé™é—®é¢˜å·²è§£å†³** âœ…
   - æ„å»º #7 å¯ä»¥æˆåŠŸæ‰§è¡Œ `docker pull node:18-alpine`
   - Docker Pipeline æ’ä»¶æ­£å¸¸å·¥ä½œ

2. **æ–°é—®é¢˜ï¼šhusky å‘½ä»¤æ‰¾ä¸åˆ°** âŒ
   - `npm ci` æ‰§è¡Œåï¼Œä¼šè¿è¡Œ `prepare` è„šæœ¬
   - `prepare` è„šæœ¬å°è¯•æ‰§è¡Œ `husky install`
   - ä½† `husky` å‘½ä»¤æ‰¾ä¸åˆ°ï¼ˆå¯èƒ½æ˜¯è·¯å¾„é—®é¢˜æˆ–å®‰è£…é—®é¢˜ï¼‰

### è§£å†³æ–¹æ¡ˆ

ä¿®æ”¹ `package.json` ä¸­çš„ `prepare` è„šæœ¬ï¼Œè®©å®ƒåœ¨ husky ä¸å­˜åœ¨æ—¶ä¸ä¼šå¤±è´¥ï¼š

```json
{
  "scripts": {
    "prepare": "husky install || true"
  }
}
```

**ä¸ºä»€ä¹ˆè¿™æ ·ä¿®æ”¹ï¼Ÿ**
- `|| true` ç¡®ä¿å³ä½¿ `husky install` å¤±è´¥ï¼Œè„šæœ¬ä¹Ÿä¼šè¿”å›æˆåŠŸ
- åœ¨ CI ç¯å¢ƒä¸­ï¼Œé€šå¸¸ä¸éœ€è¦ huskyï¼ˆå®ƒæ˜¯ Git hooks å·¥å…·ï¼Œç”¨äºæœ¬åœ°å¼€å‘ï¼‰
- è¿™æ ·ä¿®æ”¹ä¸ä¼šå½±å“æœ¬åœ°å¼€å‘ï¼Œä½†å¯ä»¥è®© CI æ„å»ºç»§ç»­

---

## âœ… ä¿®å¤æ­¥éª¤

### æ­¥éª¤ 1: ä¿®æ”¹ package.json

å·²ä¿®æ”¹ `prepare` è„šæœ¬ï¼š
```json
"prepare": "husky install || true"
```

### æ­¥éª¤ 2: æäº¤å¹¶æ¨é€

```bash
git add package.json
git commit -m "fix: make husky install optional in CI environment"
git push origin main
```

### æ­¥éª¤ 3: é‡æ–°è§¦å‘æ„å»º

åœ¨ Jenkins Web UI ä¸­ç‚¹å‡» **Build Now** é‡æ–°è§¦å‘æ„å»ºã€‚

---

## ğŸ“‹ é¢„æœŸç»“æœ

ä¿®å¤åï¼Œæ„å»ºåº”è¯¥èƒ½å¤Ÿï¼š

1. âœ… ä»£ç æ£€å‡ºæˆåŠŸ
2. âœ… å®‰è£…ä¾èµ–æˆåŠŸï¼ˆåŒ…æ‹¬ husky çš„ prepare è„šæœ¬ï¼‰
3. âœ… ç»§ç»­æ‰§è¡Œåç»­é˜¶æ®µï¼ˆLintã€Buildã€Exportã€Deployï¼‰

---

**æç¤º**: å·²ä¿®å¤ husky é—®é¢˜ï¼Œç°åœ¨å¯ä»¥æäº¤å¹¶æ¨é€ä»£ç ï¼Œç„¶åé‡æ–°è§¦å‘æ„å»ºæµ‹è¯•ã€‚
