# ä»£ç åŒæ­¥æ£€æŸ¥å’Œæ„å»ºè§¦å‘æŒ‡å—

**æ—¶é—´**: 2026-01-19  
**çŠ¶æ€**: âœ… Job é…ç½®å·²åˆ›å»º

## âœ… å·²å®Œæˆ

1. **Job é…ç½®å·²åˆ›å»º**: `/var/jenkins_home/jobs/suntaya-server-blog/config.xml`
2. **é…ç½®å†…å®¹**: 
   - Repository URL: `git@github.com:slk1061569042-lab/suntaya_server_blog.git`
   - Branch: `*/main`
   - Credential: `github-ssh-key`
   - Script Path: `Jenkinsfile`

## ğŸ” å…³äºä»£ç åŒæ­¥

### é‡è¦è¯´æ˜

**Jenkins ä¸ä¼šé¢„å…ˆåŒæ­¥ä»£ç **ã€‚ä»£ç åŒæ­¥å‘ç”Ÿåœ¨æ„å»ºæ—¶ï¼š

1. **è§¦å‘æ„å»º** â†’ Jenkins å¼€å§‹æ‰§è¡Œ Pipeline
2. **Checkout é˜¶æ®µ** â†’ Jenkins ä» GitHub æ‹‰å–ä»£ç åˆ°å·¥ä½œåŒº
3. **å·¥ä½œåŒºåˆ›å»º** â†’ `/var/jenkins_home/jobs/suntaya-server-blog/workspace/`

å› æ­¤ï¼Œ**åªæœ‰åœ¨æ„å»ºæ—¶æ‰èƒ½çœ‹åˆ°ä»£ç æ˜¯å¦åŒæ­¥æˆåŠŸ**ã€‚

---

## ğŸ§ª è§¦å‘æ„å»º

### æ–¹æ³• 1: é€šè¿‡ Web UIï¼ˆæ¨èï¼‰

1. **è®¿é—® Jenkins**: http://115.190.54.220:14808
2. **åˆ·æ–°é¡µé¢**: æŒ‰ `F5` åˆ·æ–°ï¼Œåº”è¯¥èƒ½çœ‹åˆ° `suntaya-server-blog` Job
3. **è¿›å…¥ Job**: ç‚¹å‡» `suntaya-server-blog`
4. **è§¦å‘æ„å»º**: ç‚¹å‡»å·¦ä¾§èœå•çš„ **Build Now**ï¼ˆç«‹å³æ„å»ºï¼‰

### æ–¹æ³• 2: ç­‰å¾…è‡ªåŠ¨è§¦å‘

å¦‚æœé…ç½®äº† GitHub Webhookï¼Œæ¨é€ä»£ç åˆ° GitHub æ—¶ä¼šè‡ªåŠ¨è§¦å‘æ„å»ºã€‚

---

## ğŸ“‹ æ„å»ºåçš„éªŒè¯

### æ­¥éª¤ 1: è§‚å¯Ÿæ„å»ºè¿‡ç¨‹

æ„å»ºå¼€å§‹åï¼Œç‚¹å‡»æ„å»ºå·æŸ¥çœ‹ **Console Output**ï¼Œåº”è¯¥çœ‹åˆ°ï¼š

```
[Pipeline] stage
[Pipeline] { (Checkout)
[Pipeline] checkout
Cloning repository git@github.com:slk1061569042-lab/suntaya_server_blog.git
Checking out branch main
```

### æ­¥éª¤ 2: éªŒè¯ä»£ç åŒæ­¥

å¦‚æœçœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼Œè¯´æ˜ä»£ç å·²æˆåŠŸåŒæ­¥ï¼š

- âœ… `Cloning repository` - æ­£åœ¨å…‹éš†ä»“åº“
- âœ… `Checking out branch main` - æ­£åœ¨æ£€å‡º main åˆ†æ”¯
- âœ… `Commit: xxxxx` - æ˜¾ç¤ºæäº¤å“ˆå¸Œ

### æ­¥éª¤ 3: éªŒè¯å·¥ä½œåŒº

æ„å»ºå¼€å§‹åï¼Œå¯ä»¥æ£€æŸ¥å·¥ä½œåŒºï¼š

```bash
ssh root@115.190.54.220 "docker exec jenkins_hwfa-jenkins_hWFA-1 bash -c 'ls -la /var/jenkins_home/jobs/suntaya-server-blog/workspace/ 2>&1 | head -20'"
```

åº”è¯¥èƒ½çœ‹åˆ°ï¼š
- `Jenkinsfile`
- `package.json`
- `next.config.ts`
- å…¶ä»–é¡¹ç›®æ–‡ä»¶

### æ­¥éª¤ 4: éªŒè¯æ„å»ºæµç¨‹

åº”è¯¥çœ‹åˆ°ä»¥ä¸‹é˜¶æ®µï¼š

1. âœ… **Checkout**: ä»£ç æ£€å‡º
2. âœ… **Install Dependencies**: å®‰è£…ä¾èµ–
3. âœ… **Lint**: ä»£ç æ£€æŸ¥ï¼ˆå¦‚æœæœ‰ï¼‰
4. âœ… **Build Next.js**: æ„å»ºé¡¹ç›®
5. âœ… **Export static site**: é™æ€å¯¼å‡º
6. âœ… **Deploy**: éƒ¨ç½²åˆ°æœåŠ¡å™¨

---

## ğŸ” å¦‚æœæ„å»ºå¤±è´¥

### æŸ¥çœ‹æ„å»ºæ—¥å¿—

1. è¿›å…¥å¤±è´¥çš„æ„å»º
2. ç‚¹å‡» **Console Output**
3. æŸ¥æ‰¾é”™è¯¯ä¿¡æ¯
4. **å‘Šè¯‰æˆ‘å…·ä½“çš„é”™è¯¯**ï¼Œæˆ‘ä¼šå¸®ä½ è§£å†³

### å¸¸è§é—®é¢˜

1. **ä»£ç æ‹‰å–å¤±è´¥**:
   - é”™è¯¯: `Permission denied` æˆ– `Host key verification failed`
   - è§£å†³: æ£€æŸ¥ Credentialã€SSH Config å’Œ Known Hosts

2. **æ’ä»¶é”™è¯¯**:
   - é”™è¯¯: `Invalid agent type "docker"`
   - è§£å†³: æ£€æŸ¥æ’ä»¶æ˜¯å¦å·²æ­£ç¡®åŠ è½½

3. **æ„å»ºé”™è¯¯**:
   - é”™è¯¯: `npm install failed` æˆ– `npm run build failed`
   - è§£å†³: æŸ¥çœ‹å…·ä½“çš„ npm é”™è¯¯ä¿¡æ¯

---

## ğŸ“Š æ€»ç»“

- âœ… **Job é…ç½®å·²åˆ›å»º**: å¯ä»¥åœ¨ Jenkins Web UI ä¸­çœ‹åˆ°
- â³ **ä»£ç åŒæ­¥**: éœ€è¦åœ¨æ„å»ºæ—¶éªŒè¯
- ğŸ§ª **è§¦å‘æ„å»º**: åœ¨ Web UI ä¸­ç‚¹å‡» **Build Now**

**æç¤º**: ç°åœ¨å¯ä»¥åœ¨ Jenkins Web UI ä¸­è§¦å‘æ„å»ºäº†ã€‚æ„å»ºå¼€å§‹åï¼Œä»£ç ä¼šè‡ªåŠ¨ä» GitHub åŒæ­¥åˆ° Jenkins å·¥ä½œåŒºã€‚
