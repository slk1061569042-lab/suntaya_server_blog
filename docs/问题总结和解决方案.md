# é—®é¢˜æ€»ç»“å’Œè§£å†³æ–¹æ¡ˆ

**æ—¶é—´**: 2026-01-20  
**çŠ¶æ€**: â³ ç­‰å¾…æ¨é€

## ğŸ” é—®é¢˜æ€»ç»“

### å½“å‰çŠ¶æ€

1. **Docker æƒé™é—®é¢˜** âœ… å·²è§£å†³
2. **husky é—®é¢˜** âŒ ä»ç„¶å­˜åœ¨
3. **ä»£ç æ¨é€** âŒ è¢«é˜»æ­¢ï¼ˆå†å²æäº¤ä¸­æœ‰ç§é’¥ï¼‰

### æ„å»ºå¤±è´¥åŸå› 

æ„å»º #9 å¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯ï¼š
```
> git-docs-blog@0.1.0 prepare
> husky install

sh: husky: not found
npm error code 127
```

**æ ¹æœ¬åŸå› **:
- Jenkins æ‹‰å–çš„è¿˜æ˜¯æ—§ç‰ˆæœ¬çš„ä»£ç ï¼ˆGitHub ä¸Šçš„ä»£ç ï¼‰
- æœ¬åœ°ä¿®æ”¹çš„ `package.json` å’Œ `Jenkinsfile` æ— æ³•æ¨é€åˆ° GitHub
- å› æ­¤ Jenkins æ„å»ºæ—¶ä»ç„¶æ‰§è¡Œæ—§çš„ `prepare` è„šæœ¬

---

## âœ… å·²å®Œæˆçš„ä¿®å¤

### 1. ä¿®æ”¹ package.json

æœ¬åœ°å·²ä¿®æ”¹ï¼š
```json
"prepare": "husky install || true"
```

### 2. ä¿®æ”¹ Jenkinsfile

æœ¬åœ°å·²ä¿®æ”¹ï¼Œæ·»åŠ äº†ç¯å¢ƒå˜é‡ï¼š
```groovy
environment {
    // è·³è¿‡ npm prepare è„šæœ¬ï¼ˆé¿å… husky install å¤±è´¥ï¼‰
    npm_config_ignore_scripts = 'true'
}
```

---

## ğŸš€ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: ä½¿ç”¨ GitHub ä¸´æ—¶å…è®¸é“¾æ¥ï¼ˆæ¨èï¼‰

**æ­¥éª¤**:
1. è®¿é—®ä¸´æ—¶å…è®¸é“¾æ¥ï¼š
   ```
   https://github.com/slk1061569042-lab/suntaya_server_blog/security/secret-scanning/unblock-secret/38THVpsaZpjbYSjPSbIJSuToFmZ
   ```
2. ç‚¹å‡»å…è®¸æ¨é€
3. æ¨é€ä»£ç ï¼š
   ```bash
   git push origin main
   ```

### æ–¹æ¡ˆ 2: ä»å†å²ä¸­ç§»é™¤ç§é’¥

ä½¿ç”¨ `git filter-repo` æˆ– `BFG Repo-Cleaner` ä»å†å²ä¸­ç§»é™¤ç§é’¥ã€‚

### æ–¹æ¡ˆ 3: åˆ›å»ºæ–°åˆ†æ”¯

åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œæ¨é€ä¿®æ”¹ï¼Œç„¶ååˆå¹¶åˆ° main åˆ†æ”¯ã€‚

---

## ğŸ“‹ æ¨é€åçš„é¢„æœŸç»“æœ

æ¨é€æˆåŠŸåï¼š

1. âœ… Jenkins ä¼šè‡ªåŠ¨è§¦å‘æ„å»ºï¼ˆå¦‚æœé…ç½®äº† Webhookï¼‰
2. âœ… æˆ–è€…æ‰‹åŠ¨è§¦å‘æ„å»º
3. âœ… æ„å»ºåº”è¯¥èƒ½å¤Ÿï¼š
   - ä»£ç æ£€å‡ºæˆåŠŸ
   - å®‰è£…ä¾èµ–æˆåŠŸï¼ˆè·³è¿‡ prepare è„šæœ¬ï¼‰
   - ç»§ç»­æ‰§è¡Œåç»­é˜¶æ®µï¼ˆLintã€Buildã€Exportã€Deployï¼‰

---

## ğŸ”§ å¦‚æœæ— æ³•æ¨é€

### ä¸´æ—¶æ–¹æ¡ˆ: ç›´æ¥åœ¨ Jenkins ä¸­ä¿®æ”¹

å¦‚æœæš‚æ—¶æ— æ³•æ¨é€ï¼Œå¯ä»¥ï¼š
1. åœ¨ Jenkins Web UI ä¸­ç¼–è¾‘ Job é…ç½®
2. å°† Pipeline å®šä¹‰æ”¹ä¸º "Pipeline script"ï¼ˆè€Œä¸æ˜¯ "Pipeline script from SCM"ï¼‰
3. ç›´æ¥ç²˜è´´ä¿®æ”¹åçš„ Jenkinsfile å†…å®¹

**æ³¨æ„**: è¿™ä¸ªæ–¹æ¡ˆæ˜¯ä¸´æ—¶çš„ï¼Œä¸æ¨èé•¿æœŸä½¿ç”¨ã€‚

---

**æç¤º**: å·²ä¿®å¤ husky é—®é¢˜ï¼Œç°åœ¨éœ€è¦ä½¿ç”¨ GitHub çš„ä¸´æ—¶å…è®¸é“¾æ¥æ¥æ¨é€ä»£ç ã€‚æ¨é€æˆåŠŸåï¼ŒJenkins ä¼šè‡ªåŠ¨è§¦å‘æ„å»ºæˆ–å¯ä»¥æ‰‹åŠ¨è§¦å‘æ„å»ºæµ‹è¯•ã€‚
