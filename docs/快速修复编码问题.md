# å¿«é€Ÿä¿®å¤ç¼–ç é—®é¢˜

**æ—¶é—´**: 2026-01-20  
**é—®é¢˜**: Git æäº¤ä¿¡æ¯ä¹±ç ã€Jenkins éƒ¨ç½²æ—¶ä¹±ç 

## ğŸš€ å¿«é€Ÿä¿®å¤æ­¥éª¤

### æ­¥éª¤ 1: è¿è¡Œä¿®å¤è„šæœ¬

```powershell
# è¿›å…¥é¡¹ç›®ç›®å½•
cd e:\GitSpace\suntaya_server_blog

# è¿è¡Œä¿®å¤è„šæœ¬
powershell -ExecutionPolicy Bypass -File .\scripts\fix-encoding.ps1
```

### æ­¥éª¤ 2: è®¾ç½®å½“å‰ PowerShell ç¼–ç 

```powershell
# è®¾ç½®ç¼–ç ä¸º UTF-8
chcp 65001
[Console]::OutputEncoding = [System.Text.Encoding]::UTF-8
```

### æ­¥éª¤ 3: æµ‹è¯•æäº¤

```powershell
# æµ‹è¯•æäº¤ï¼ˆä½¿ç”¨ä¸­æ–‡ï¼‰
git commit --allow-empty -m "æµ‹è¯•: ä¸­æ–‡ç¼–ç æµ‹è¯•"

# æŸ¥çœ‹æäº¤ä¿¡æ¯
git log -1 --pretty=format:"%s"

# åº”è¯¥æ˜¾ç¤ºæ­£ç¡®çš„ä¸­æ–‡ï¼Œè€Œä¸æ˜¯ä¹±ç 
```

---

## ğŸ“‹ å·²å®Œæˆçš„ä¿®å¤

### 1. Jenkinsfile ç¼–ç é…ç½®

å·²åœ¨ `Jenkinsfile` ä¸­æ·»åŠ ç¼–ç ç¯å¢ƒå˜é‡ï¼š

```groovy
environment {
    // ç¼–ç è®¾ç½®ï¼ˆè§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜ï¼‰
    LANG = 'zh_CN.UTF-8'
    LC_ALL = 'zh_CN.UTF-8'
    PYTHONIOENCODING = 'utf-8'
    // ...
}
```

### 2. Checkout é˜¶æ®µç¼–ç è®¾ç½®

å·²åœ¨ `Checkout` é˜¶æ®µæ·»åŠ  Shell ç¼–ç è®¾ç½®ï¼š

```groovy
stage('Checkout') {
    steps {
        script {
            sh '''
                export LANG=zh_CN.UTF-8
                export LC_ALL=zh_CN.UTF-8
                echo "æ­£åœ¨æ£€å‡ºä»£ç ..."
            '''
        }
        // ...
    }
}
```

---

## ğŸ”§ æ°¸ä¹…é…ç½®ï¼ˆæ¨èï¼‰

### é…ç½® Git ç¼–ç ï¼ˆå…¨å±€ï¼‰

```powershell
git config --global i18n.commitencoding utf-8
git config --global i18n.logoutputencoding utf-8
git config --global core.quotepath false
```

### é…ç½® PowerShell ç¼–ç ï¼ˆæ·»åŠ åˆ°é…ç½®æ–‡ä»¶ï¼‰

```powershell
# æŸ¥çœ‹é…ç½®æ–‡ä»¶è·¯å¾„
$PROFILE

# ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ ï¼š
[Console]::OutputEncoding = [System.Text.Encoding]::UTF-8
$PSDefaultParameterValues['*:Encoding'] = 'utf8'
```

---

## ğŸ¯ Jenkins ç³»ç»Ÿé…ç½®

### åœ¨ Jenkins ä¸­è®¾ç½®ç¼–ç 

1. **æ‰“å¼€ Jenkins**ï¼šManage Jenkins â†’ Configure System
2. **æ‰¾åˆ° "Global properties"** â†’ å‹¾é€‰ "Environment variables"
3. **æ·»åŠ ç¯å¢ƒå˜é‡**ï¼š
   ```
   LANG = zh_CN.UTF-8
   LC_ALL = zh_CN.UTF-8
   JAVA_TOOL_OPTIONS = -Dfile.encoding=UTF-8 -Duser.language=zh -Duser.country=CN
   ```

---

## âœ… éªŒè¯ä¿®å¤

### éªŒè¯ Git ç¼–ç 

```powershell
# 1. è®¾ç½®ç¼–ç 
chcp 65001
[Console]::OutputEncoding = [System.Text.Encoding]::UTF-8

# 2. æŸ¥çœ‹ Git é…ç½®
git config --global --list | Select-String encoding

# åº”è¯¥çœ‹åˆ°ï¼š
# i18n.commitencoding=utf-8
# i18n.logoutputencoding=utf-8
```

### éªŒè¯ Jenkins ç¼–ç 

1. **è§¦å‘ä¸€æ¬¡æ„å»º**
2. **æŸ¥çœ‹æ§åˆ¶å°è¾“å‡º**ï¼šä¸­æ–‡åº”è¯¥æ­£å¸¸æ˜¾ç¤º
3. **æ£€æŸ¥æ—¥å¿—**ï¼šä¸­æ–‡åº”è¯¥æ­£ç¡®æ˜¾ç¤º

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æ¯æ¬¡æäº¤å‰**ï¼šè¿è¡Œ `chcp 65001` ç¡®ä¿ç¼–ç æ­£ç¡®
2. **Jenkins æ„å»º**ï¼šå·²è‡ªåŠ¨é…ç½®ç¼–ç ï¼Œæ— éœ€æ‰‹åŠ¨è®¾ç½®
3. **å·²æäº¤çš„ä¹±ç **ï¼šéœ€è¦ä½¿ç”¨ `git commit --amend` æˆ– `git rebase` ä¿®å¤

---

**æœ€åæ›´æ–°**: 2026-01-20
