# æœ€ç»ˆè§£å†³æ–¹æ¡ˆ - ä½¿ç”¨ GitHub ä¸´æ—¶å…è®¸é“¾æ¥

**æ—¶é—´**: 2026-01-20  
**çŠ¶æ€**: â³ ç­‰å¾…æ¨é€

## ğŸ” é—®é¢˜åˆ†æ

### æ„å»º #9 çš„é”™è¯¯

```
> git-docs-blog@0.1.0 prepare
> husky install

sh: husky: not found
npm error code 127
```

### æ ¹æœ¬åŸå› 

1. **Docker æƒé™é—®é¢˜å·²è§£å†³** âœ…
2. **husky é—®é¢˜ä»ç„¶å­˜åœ¨** âŒ
   - `package.json` ä¸­çš„ `prepare` è„šæœ¬ä¼šåœ¨ `npm ci` åè‡ªåŠ¨æ‰§è¡Œ
   - `husky install` å‘½ä»¤æ‰¾ä¸åˆ°
3. **Jenkinsfile ä¿®æ”¹æœªç”Ÿæ•ˆ** âŒ
   - æœ¬åœ°ä¿®æ”¹çš„ Jenkinsfile æ— æ³•æ¨é€åˆ° GitHubï¼ˆæ¨é€è¢«é˜»æ­¢ï¼‰
   - Jenkins æ‹‰å–çš„è¿˜æ˜¯æ—§ç‰ˆæœ¬çš„ Jenkinsfileï¼ˆæ²¡æœ‰ `npm_config_ignore_scripts`ï¼‰

---

## âœ… å·²å®Œæˆçš„ä¿®å¤

### 1. ä¿®æ”¹ Jenkinsfile

å·²åœ¨æœ¬åœ°ä¿®æ”¹ Jenkinsfileï¼Œæ·»åŠ äº†ç¯å¢ƒå˜é‡ï¼š

```groovy
environment {
    // ... å…¶ä»–ç¯å¢ƒå˜é‡
    // è·³è¿‡ npm prepare è„šæœ¬ï¼ˆé¿å… husky install å¤±è´¥ï¼‰
    npm_config_ignore_scripts = 'true'
}
```

### 2. ä¿®æ”¹ package.json

å·²åœ¨æœ¬åœ°ä¿®æ”¹ package.jsonï¼Œå°† prepare è„šæœ¬æ”¹ä¸ºå¯é€‰ï¼š

```json
"prepare": "husky install || true"
```

---

## ğŸš€ è§£å†³æ–¹æ¡ˆ

### ä½¿ç”¨ GitHub ä¸´æ—¶å…è®¸é“¾æ¥

ç”±äºå†å²æäº¤ä¸­æœ‰ç§é’¥ï¼Œæ¨é€è¢«é˜»æ­¢ã€‚GitHub æä¾›äº†ä¸´æ—¶å…è®¸é“¾æ¥ï¼š

**è®¿é—®ä»¥ä¸‹é“¾æ¥ï¼Œä¸´æ—¶å…è®¸æ¨é€**ï¼š
```
https://github.com/slk1061569042-lab/suntaya_server_blog/security/secret-scanning/unblock-secret/38THVpsaZpjbYSjPSbIJSuToFmZ
```

### æ¨é€æ­¥éª¤

1. **è®¿é—®ä¸´æ—¶å…è®¸é“¾æ¥**ï¼ˆä¸Šé¢çš„é“¾æ¥ï¼‰
2. **ç‚¹å‡»å…è®¸æ¨é€**
3. **æ¨é€ä»£ç **ï¼š
   ```bash
   git push origin main
   ```

---

## ğŸ“‹ é¢„æœŸç»“æœ

æ¨é€æˆåŠŸåï¼š

1. âœ… Jenkins ä¼šè‡ªåŠ¨è§¦å‘æ„å»ºï¼ˆå¦‚æœé…ç½®äº† Webhookï¼‰
2. âœ… æˆ–è€…æ‰‹åŠ¨è§¦å‘æ„å»º
3. âœ… æ„å»ºåº”è¯¥èƒ½å¤Ÿï¼š
   - ä»£ç æ£€å‡ºæˆåŠŸ
   - å®‰è£…ä¾èµ–æˆåŠŸï¼ˆè·³è¿‡ prepare è„šæœ¬ï¼‰
   - ç»§ç»­æ‰§è¡Œåç»­é˜¶æ®µ

---

## ğŸ”§ å¦‚æœä¸´æ—¶å…è®¸é“¾æ¥ä¸å¯ç”¨

### æ–¹æ¡ˆ 1: ä»å†å²ä¸­ç§»é™¤ç§é’¥

ä½¿ç”¨ `git filter-repo` æˆ– `BFG Repo-Cleaner` ä»å†å²ä¸­ç§»é™¤ç§é’¥ã€‚

### æ–¹æ¡ˆ 2: åˆ›å»ºæ–°åˆ†æ”¯

åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œæ¨é€ä¿®æ”¹ï¼Œç„¶ååˆå¹¶åˆ° main åˆ†æ”¯ã€‚

---

**æç¤º**: å·²ä¿®å¤ husky é—®é¢˜ï¼Œç°åœ¨éœ€è¦ä½¿ç”¨ GitHub çš„ä¸´æ—¶å…è®¸é“¾æ¥æ¥æ¨é€ä»£ç ã€‚æ¨é€æˆåŠŸåï¼ŒJenkins ä¼šè‡ªåŠ¨è§¦å‘æ„å»ºæˆ–å¯ä»¥æ‰‹åŠ¨è§¦å‘æ„å»ºæµ‹è¯•ã€‚
