# æœ¬åœ°ä»£ç æ¨é€åˆ°æœåŠ¡å™¨ Git æŒ‡å—

**æ›´æ–°æ—¶é—´**: 2026-01-19  
**æœåŠ¡å™¨**: 115.190.54.220

## âœ… å·²å®Œæˆçš„é…ç½®

### 1. Git ç‰ˆæœ¬æ›´æ–°
- **æ—§ç‰ˆæœ¬**: 2.43.0
- **æ–°ç‰ˆæœ¬**: 2.52.0 âœ…
- **çŠ¶æ€**: å·²æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬

### 2. æœåŠ¡å™¨ Git é…ç½®
- **ç”¨æˆ·å**: `slk1061569042-lab`
- **é‚®ç®±**: `slk1061569042@gmail.com`
- **é»˜è®¤åˆ†æ”¯**: `main`

### 3. æœåŠ¡å™¨ Git ä»“åº“
- **ä»“åº“ä½ç½®**: `/www/git-repos/suntaya_server_blog.git`
- **ä»“åº“ç±»å‹**: Bare Repositoryï¼ˆä¸­å¤®ä»“åº“ï¼‰
- **è®¿é—®æ–¹å¼**: SSH

### 4. æœ¬åœ°è¿œç¨‹ä»“åº“é…ç½®
- **origin**: `https://github.com/slk1061569042-lab/suntaya_server_blog.git` (GitHub)
- **server**: `root@115.190.54.220:/www/git-repos/suntaya_server_blog.git` (æœåŠ¡å™¨)

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æ–¹æ³• 1: ä½¿ç”¨æ¨é€è„šæœ¬ï¼ˆæ¨èï¼‰

è¿è¡Œæˆ‘åˆ›å»ºçš„è„šæœ¬ï¼š

```powershell
.\scripts\push_to_server.ps1
```

è„šæœ¬ä¼šï¼š
1. æ£€æŸ¥ Git çŠ¶æ€
2. æç¤ºæ˜¯å¦æäº¤æœªæäº¤çš„æ›´æ”¹
3. é€‰æ‹©æ¨é€ç›®æ ‡ï¼ˆGitHubã€æœåŠ¡å™¨ã€æˆ–ä¸¤è€…ï¼‰
4. æ‰§è¡Œæ¨é€

### æ–¹æ³• 2: æ‰‹åŠ¨æ¨é€å‘½ä»¤

#### æ¨é€åˆ° GitHub
```powershell
git push origin main
```

#### æ¨é€åˆ°æœåŠ¡å™¨
```powershell
git push server main
```

#### åŒæ—¶æ¨é€åˆ°ä¸¤è€…
```powershell
git push origin main
git push server main
```

## ğŸ“‹ å®Œæ•´å·¥ä½œæµç¨‹

### æ—¥å¸¸å¼€å‘æµç¨‹

```powershell
# 1. ä¿®æ”¹ä»£ç åï¼Œæ·»åŠ æ›´æ”¹
git add .

# 2. æäº¤æ›´æ”¹
git commit -m "ä½ çš„æäº¤ä¿¡æ¯"

# 3. æ¨é€åˆ° GitHubï¼ˆå¯é€‰ï¼‰
git push origin main

# 4. æ¨é€åˆ°æœåŠ¡å™¨ï¼ˆå¯é€‰ï¼‰
git push server main

# æˆ–è€…ä½¿ç”¨è„šæœ¬ä¸€é”®æ¨é€
.\scripts\push_to_server.ps1
```

### é¦–æ¬¡æ¨é€

å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡æ¨é€åˆ°æœåŠ¡å™¨ï¼Œéœ€è¦è®¾ç½®ä¸Šæ¸¸åˆ†æ”¯ï¼š

```powershell
git push -u server main
```

ä¹‹åå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ `git push server` äº†ã€‚

## ğŸ”§ æœåŠ¡å™¨ç«¯æ“ä½œ

### åœ¨æœåŠ¡å™¨ä¸Šå…‹éš†ä»£ç 

æ¨é€ä»£ç åˆ°æœåŠ¡å™¨åï¼Œå¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šå…‹éš†æˆ–æ‹‰å–ï¼š

```bash
# SSH åˆ°æœåŠ¡å™¨
ssh root@115.190.54.220

# å…‹éš†ä»£ç åˆ°å·¥ä½œç›®å½•
cd /www/wwwroot
git clone /www/git-repos/suntaya_server_blog.git next.sunyas.com

# æˆ–è€…å¦‚æœå·²ç»å­˜åœ¨ï¼Œæ‹‰å–æ›´æ–°
cd /www/wwwroot/next.sunyas.com
git pull
```

### æŸ¥çœ‹æœåŠ¡å™¨ä»“åº“

```bash
# æŸ¥çœ‹æœåŠ¡å™¨ä»“åº“ä¿¡æ¯
ssh root@115.190.54.220 "cd /www/git-repos/suntaya_server_blog.git && git log --oneline -10"
```

## ğŸ” éªŒè¯é…ç½®

### æ£€æŸ¥è¿œç¨‹ä»“åº“

```powershell
# æŸ¥çœ‹æ‰€æœ‰è¿œç¨‹ä»“åº“
git remote -v

# åº”è¯¥çœ‹åˆ°ï¼š
# origin  https://github.com/slk1061569042-lab/suntaya_server_blog.git
# server  root@115.190.54.220:/www/git-repos/suntaya_server_blog.git
```

### æµ‹è¯•æœåŠ¡å™¨è¿æ¥

```powershell
# æµ‹è¯• SSH è¿æ¥
ssh root@115.190.54.220 "echo 'SSH connection successful'"

# æµ‹è¯•æœåŠ¡å™¨ä»“åº“
git ls-remote server
```

## âš ï¸ å¸¸è§é—®é¢˜

### é—®é¢˜ 1: æ¨é€æ—¶æç¤º "Permission denied"

**åŸå› **: SSH å¯†é’¥æœªé…ç½®æˆ–æƒé™é—®é¢˜

**è§£å†³æ–¹æ³•**:
1. ç¡®ä¿å·²é…ç½® SSH å¯†é’¥
2. æ£€æŸ¥æœåŠ¡å™¨ä»“åº“æƒé™ï¼š
   ```bash
   ssh root@115.190.54.220 "ls -la /www/git-repos/suntaya_server_blog.git"
   ```

### é—®é¢˜ 2: æ¨é€æ—¶æç¤º "Repository not found"

**åŸå› **: æœåŠ¡å™¨ä»“åº“è·¯å¾„é”™è¯¯

**è§£å†³æ–¹æ³•**:
```powershell
# æ£€æŸ¥è¿œç¨‹ä»“åº“é…ç½®
git remote -v

# å¦‚æœé”™è¯¯ï¼Œé‡æ–°æ·»åŠ 
git remote remove server
git remote add server root@115.190.54.220:/www/git-repos/suntaya_server_blog.git
```

### é—®é¢˜ 3: æ¨é€æˆåŠŸä½†æœåŠ¡å™¨ä¸Šçœ‹ä¸åˆ°ä»£ç 

**åŸå› **: æœåŠ¡å™¨ä»“åº“æ˜¯ bare repositoryï¼Œéœ€è¦å…‹éš†åˆ°å·¥ä½œç›®å½•

**è§£å†³æ–¹æ³•**:
```bash
# åœ¨æœåŠ¡å™¨ä¸Šå…‹éš†
ssh root@115.190.54.220
cd /www/wwwroot
git clone /www/git-repos/suntaya_server_blog.git next.sunyas.com
```

## ğŸ“Š ä¸‰ç§æ¨é€æ–¹å¼å¯¹æ¯”

| æ–¹å¼ | å‘½ä»¤ | ç”¨é€” | é€Ÿåº¦ |
|------|------|------|------|
| **GitHub** | `git push origin main` | ä»£ç æ‰˜ç®¡ã€å¤‡ä»½ã€åä½œ | å–å†³äºç½‘ç»œ |
| **æœåŠ¡å™¨** | `git push server main` | ç›´æ¥éƒ¨ç½²ã€å¿«é€Ÿæ›´æ–° | å¿«ï¼ˆå†…ç½‘ï¼‰ |
| **ä¸¤è€…** | åˆ†åˆ«æ¨é€ | åŒæ—¶å¤‡ä»½å’Œéƒ¨ç½² | - |

## ğŸ¯ ä½¿ç”¨å»ºè®®

### âœ… æ¨èå·¥ä½œæµç¨‹

1. **å¼€å‘é˜¶æ®µ**
   - åœ¨æœ¬åœ°ä¿®æ”¹ä»£ç 
   - æäº¤åˆ°æœ¬åœ°ä»“åº“
   - æ¨é€åˆ° GitHubï¼ˆå¤‡ä»½å’Œç‰ˆæœ¬æ§åˆ¶ï¼‰

2. **éƒ¨ç½²é˜¶æ®µ**
   - æ¨é€åˆ°æœåŠ¡å™¨ï¼ˆå¿«é€Ÿéƒ¨ç½²ï¼‰
   - æˆ–è€…åœ¨æœåŠ¡å™¨ä¸Šä» GitHub æ‹‰å–

3. **ç´§æ€¥ä¿®å¤**
   - ç›´æ¥æ¨é€åˆ°æœåŠ¡å™¨ï¼ˆæœ€å¿«ï¼‰
   - ç„¶åæ¨é€åˆ° GitHubï¼ˆå¤‡ä»½ï¼‰

### ğŸ’¡ æœ€ä½³å®è·µ

1. **å®šæœŸæ¨é€åˆ° GitHub**
   - ä½œä¸ºä»£ç å¤‡ä»½
   - ä¾¿äºç‰ˆæœ¬ç®¡ç†å’Œåä½œ

2. **æŒ‰éœ€æ¨é€åˆ°æœåŠ¡å™¨**
   - éœ€è¦éƒ¨ç½²æ—¶æ¨é€
   - é¿å…é¢‘ç¹æ¨é€å½±å“æœåŠ¡å™¨

3. **ä½¿ç”¨è„šæœ¬è‡ªåŠ¨åŒ–**
   - ä½¿ç”¨ `push_to_server.ps1` è„šæœ¬
   - å¯ä»¥åŒæ—¶æ¨é€åˆ°å¤šä¸ªç›®æ ‡

## ğŸ”„ ä¸ Jenkins çš„é…åˆ

### æ–¹æ¡ˆ 1: æœåŠ¡å™¨ç›´æ¥æ‹‰å–

Jenkins æ„å»ºå®Œæˆåï¼ŒæœåŠ¡å™¨ä»è‡ªå·±çš„ Git ä»“åº“æ‹‰å–ï¼š

```bash
# åœ¨ Jenkins éƒ¨ç½²è„šæœ¬ä¸­
ssh root@115.190.54.220 << 'EOF'
cd /www/wwwroot/next.sunyas.com
git pull /www/git-repos/suntaya_server_blog.git main
npm install
npm run build
EOF
```

### æ–¹æ¡ˆ 2: ä» GitHub æ‹‰å–

ä¿æŒå½“å‰æµç¨‹ï¼ŒæœåŠ¡å™¨ä» GitHub æ‹‰å–ï¼š

```bash
# åœ¨ Jenkins éƒ¨ç½²è„šæœ¬ä¸­
ssh root@115.190.54.220 << 'EOF'
cd /www/wwwroot/next.sunyas.com
git pull origin main
npm install
npm run build
EOF
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [æœåŠ¡å™¨ä¸Š Git çš„ä½¿ç”¨åœºæ™¯å’ŒæŒ‡å—](./æœåŠ¡å™¨ä¸ŠGitçš„ä½¿ç”¨åœºæ™¯å’ŒæŒ‡å—.md)
- [GitHub ç®¡ç†å·¥å…·å®‰è£…å’Œé…ç½®æŒ‡å—](./GitHubç®¡ç†å·¥å…·å®‰è£…å’Œé…ç½®æŒ‡å—.md)
- [åˆ›å»º GitHub ä»“åº“å¹¶æ¨é€ä»£ç æŒ‡å—](./åˆ›å»ºGitHubä»“åº“å¹¶æ¨é€ä»£ç æŒ‡å—.md)

---

**æ€»ç»“**: ç°åœ¨ä½ å¯ä»¥é€‰æ‹©å°†ä»£ç æ¨é€åˆ° GitHubã€æœåŠ¡å™¨ï¼Œæˆ–ä¸¤è€…ã€‚ä½¿ç”¨ `.\scripts\push_to_server.ps1` è„šæœ¬å¯ä»¥æ–¹ä¾¿åœ°é€‰æ‹©æ¨é€ç›®æ ‡ã€‚

---

**æœ€åæ›´æ–°**: 2026-01-19
