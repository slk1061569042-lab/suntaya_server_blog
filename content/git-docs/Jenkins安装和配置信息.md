# Jenkins å®‰è£…å’Œé…ç½®ä¿¡æ¯æ£€æŸ¥æŠ¥å‘Š

**æ£€æŸ¥æ—¶é—´**: 2026-01-19  
**æœåŠ¡å™¨**: 115.190.54.220

## ğŸ“Š åŸºæœ¬ä¿¡æ¯

### å®¹å™¨ä¿¡æ¯
- **å®¹å™¨åç§°**: `jenkins_hwfa-jenkins_hWFA-1`
- **å®¹å™¨ID**: `835074ef5600`
- **é•œåƒ**: `jenkins/jenkins:lts-jdk21`
- **Jenkinsç‰ˆæœ¬**: `2.528.3` (LTS)
- **è¿è¡ŒçŠ¶æ€**: âœ… è¿è¡Œä¸­ (Up 9 days)
- **å®¹å™¨åˆ›å»ºæ—¶é—´**: 2026-01-08 09:02:52
- **æœ€åå¯åŠ¨æ—¶é—´**: 2026-01-09 09:45:14
- **é‡å¯ç­–ç•¥**: `unless-stopped` (é™¤éæ‰‹åŠ¨åœæ­¢ï¼Œå¦åˆ™è‡ªåŠ¨é‡å¯)

### ç«¯å£æ˜ å°„
- **Web UIç«¯å£**: `14808` â†’ `8080` (å®¹å™¨å†…)
- **Agentç«¯å£**: `50000` â†’ `50000` (å®¹å™¨å†…)
- **è®¿é—®åœ°å€**: `http://115.190.54.220:14808`

### èµ„æºä½¿ç”¨æƒ…å†µ
- **CPUä½¿ç”¨ç‡**: 0.13%
- **å†…å­˜ä½¿ç”¨**: 830.9 MiB / 7.763 GiB (10.45%)
- **å†…å­˜é™åˆ¶**: æ— é™åˆ¶ï¼ˆä½¿ç”¨ç³»ç»Ÿé»˜è®¤ï¼‰

## ğŸ“ æ•°æ®å­˜å‚¨

### æ•°æ®å·æŒ‚è½½
- **Jenkins Home**: `/www/dk_project/dk_app/jenkins/jenkins_hWFA/data` â†’ `/var/jenkins_home`
- **Docker Socket**: `/var/run/docker.sock` â†’ `/var/run/docker.sock` (ç”¨äºåœ¨å®¹å™¨å†…æ‰§è¡Œ Docker å‘½ä»¤)
- **Docker Binary**: `/usr/bin/docker` â†’ `/usr/bin/docker` (ç”¨äºåœ¨å®¹å™¨å†…æ‰§è¡Œ Docker å‘½ä»¤)

### æ•°æ®ç›®å½•æƒé™
- **æ‰€æœ‰è€…**: `www:www` (å®¿ä¸»æœº)
- **å®¹å™¨å†…ç”¨æˆ·**: `jenkins:jenkins`

## âš™ï¸ é…ç½®ä¿¡æ¯

### ç³»ç»Ÿé…ç½®
- **æ‰§è¡Œå™¨æ•°é‡**: 2
- **è¿è¡Œæ¨¡å¼**: NORMAL
- **å®‰å…¨å¯ç”¨**: âœ… æ˜¯
- **æˆæƒç­–ç•¥**: `FullControlOnceLoggedInAuthorizationStrategy` (ç™»å½•åå®Œå…¨æ§åˆ¶)
- **åŒ¿åè®¿é—®**: âŒ å·²ç¦ç”¨
- **ç”¨æˆ·æ³¨å†Œ**: âŒ å·²ç¦ç”¨
- **é™é»˜æœŸ**: 5ç§’
- **Agentç«¯å£**: 50000

### ç¯å¢ƒå˜é‡
```
JENKINS_HOME=/var/jenkins_home
JENKINS_SLAVE_AGENT_PORT=50000
JENKINS_VERSION=2.528.3
JENKINS_UC=https://updates.jenkins.io
JENKINS_UC_EXPERIMENTAL=https://updates.jenkins.io/experimental
JENKINS_INCREMENTALS_REPO_MIRROR=https://repo.jenkins-ci.org/incrementals
JAVA_HOME=/opt/java/openjdk
```

### ç½‘ç»œé…ç½®
- **ç½‘ç»œæ¨¡å¼**: bridge
- **å®¹å™¨IP**: 172.17.0.2
- **ç½‘å…³**: 172.17.0.1

## ğŸ”Œ æ’ä»¶ä¿¡æ¯

- **å·²å®‰è£…æ’ä»¶æ•°é‡**: çº¦ 209 ä¸ªæ–‡ä»¶/ç›®å½•
- **æ’ä»¶ç›®å½•**: `/var/jenkins_home/plugins/`

## ğŸ“¦ ä½œä¸šä¿¡æ¯

### å·²é…ç½®çš„ä½œä¸š
1. **suntaya-server-blog**
   - ä½œä¸šç±»å‹: Pipeline
   - æœ€åæ„å»ºæ—¶é—´: 2026-01-19 02:13

## ğŸ”§ Docker é›†æˆ

Jenkins å®¹å™¨å·²é…ç½® Docker é›†æˆï¼Œå¯ä»¥åœ¨ Pipeline ä¸­ä½¿ç”¨ Dockerï¼š
- âœ… Docker Socket å·²æŒ‚è½½
- âœ… Docker äºŒè¿›åˆ¶æ–‡ä»¶å·²æŒ‚è½½
- âœ… å¯ä»¥åœ¨ Pipeline ä¸­ä½¿ç”¨ `docker` å‘½ä»¤å’Œ `docker` agent

## ğŸ“ ç›¸å…³é…ç½®æ–‡ä»¶

### Jenkinsfile
é¡¹ç›®ä¸­çš„ `Jenkinsfile` é…ç½®äº†ä»¥ä¸‹å†…å®¹ï¼š
- ä½¿ç”¨ Docker å®¹å™¨ (`node:18-alpine`) è¿›è¡Œæ„å»º
- éƒ¨ç½²ç›®æ ‡: `115.190.54.220:/www/wwwroot/next.sunyas.com`
- éƒ¨ç½²æ–¹å¼: SSH éƒ¨ç½²

### GitHub é›†æˆ
- å·²é…ç½® GitHub æ’ä»¶
- é…ç½®æ–‡ä»¶: `/var/jenkins_home/github-plugin-configuration.xml`

## ğŸ” æ—¥å¿—ä¿¡æ¯

æœ€è¿‘æ—¥å¿—æ˜¾ç¤ºï¼š
- âœ… ç³»ç»Ÿæ­£å¸¸è¿è¡Œ
- âœ… å®šæœŸæ£€æŸ¥æ›´æ–°æœåŠ¡å™¨
- âœ… å·¥å…·å®‰è£…å™¨å…ƒæ•°æ®æ­£å¸¸æ›´æ–°
- âš ï¸ è­¦å‘Š: `suntaya-server-blog#1` ä¸åœ¨æ‰§è¡Œåˆ—è¡¨ä¸­ï¼ˆå¯èƒ½æ˜¯æ­£å¸¸çš„æ„å»ºå®ŒæˆçŠ¶æ€ï¼‰

## ğŸ“Š ç³»ç»Ÿå¥åº·çŠ¶æ€

### âœ… æ­£å¸¸é¡¹ç›®
- å®¹å™¨è¿è¡ŒçŠ¶æ€æ­£å¸¸
- å†…å­˜ä½¿ç”¨ç‡æ­£å¸¸ (10.45%)
- CPU ä½¿ç”¨ç‡æ­£å¸¸ (0.13%)
- æ—¥å¿—æ— ä¸¥é‡é”™è¯¯
- æ•°æ®æŒä¹…åŒ–æ­£å¸¸

### âš ï¸ æ³¨æ„äº‹é¡¹
1. **ç«¯å£æ˜ å°„**: Web UI ç«¯å£æ˜ å°„åˆ° 14808ï¼Œä¸æ˜¯é»˜è®¤çš„ 8080
2. **æ•°æ®å¤‡ä»½**: å»ºè®®å®šæœŸå¤‡ä»½ `/www/dk_project/dk_app/jenkins/jenkins_hWFA/data` ç›®å½•
3. **ç‰ˆæœ¬æ›´æ–°**: å½“å‰ç‰ˆæœ¬ 2.528.3ï¼Œå»ºè®®å®šæœŸæ£€æŸ¥æ›´æ–°
4. **å®‰å…¨é…ç½®**: å·²å¯ç”¨å®‰å…¨è®¤è¯ï¼ŒåŒ¿åè®¿é—®å·²ç¦ç”¨

## ğŸš€ è®¿é—®æ–¹å¼

### Web UI
```
http://115.190.54.220:14808
```

### å‘½ä»¤è¡Œè®¿é—®
```bash
# è¿›å…¥å®¹å™¨
docker exec -it jenkins_hwfa-jenkins_hWFA-1 bash

# æŸ¥çœ‹æ—¥å¿—
docker logs jenkins_hwfa-jenkins_hWFA-1

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
docker logs -f jenkins_hwfa-jenkins_hWFA-1
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Jenkinsfile](../Jenkinsfile) - Pipeline é…ç½®
- [éƒ¨ç½²æ–¹æ¡ˆè¯´æ˜](../dev_docs/éƒ¨ç½²æ–¹æ¡ˆè¯´æ˜.md) - éƒ¨ç½²æ–¹æ¡ˆæ–‡æ¡£

## ğŸ”„ ç»´æŠ¤å»ºè®®

1. **å®šæœŸå¤‡ä»½**
   ```bash
   # å¤‡ä»½ Jenkins æ•°æ®
   tar -czf jenkins_backup_$(date +%Y%m%d).tar.gz /www/dk_project/dk_app/jenkins/jenkins_hWFA/data
   ```

2. **æ£€æŸ¥æ›´æ–°**
   - è®¿é—® Jenkins Web UI
   - è¿›å…¥ "Manage Jenkins" â†’ "Manage Plugins" â†’ "Updates"
   - æ£€æŸ¥ Jenkins æ ¸å¿ƒæ›´æ–°

3. **ç›‘æ§èµ„æº**
   ```bash
   # ç›‘æ§å®¹å™¨èµ„æºä½¿ç”¨
   docker stats jenkins_hwfa-jenkins_hWFA-1
   ```

4. **æ—¥å¿—æ¸…ç†**
   - Jenkins ä¼šè‡ªåŠ¨ä¿ç•™æœ€è¿‘ 10 æ¬¡æ„å»ºï¼ˆæ ¹æ® Jenkinsfile é…ç½®ï¼‰
   - å¯ä»¥æ‰‹åŠ¨æ¸…ç†æ—§æ—¥å¿—ä»¥é‡Šæ”¾ç©ºé—´

---

**æœ€åæ›´æ–°**: 2026-01-19
