# 🚀 SSH 配置快速参考卡片

## ⚡ 30秒快速检查清单

```
□ 通过 ECS Terminal 确认用户名 (whoami)
□ 使用 echo 命令添加公钥（最简单）
□ 设置权限: chmod 600 ~/.ssh/authorized_keys
□ 配置 SSH config 使用正确用户名
□ 测试连接: ssh myserver
□ 处理编码问题（如需要）
```

---

## 🔴 常见问题速查

| 问题 | 原因 | 解决方案 |
|------|------|----------|
| 密码认证失败 | 用户名错误 | ECS Terminal 执行 `whoami` |
| Permission denied | 公钥未添加 | echo 命令添加公钥 |
| 编码错误 | Windows GBK | Python 设置 `encoding='utf-8'` |
| 连接超时 | 安全组未开放 | 检查云服务器安全组 |

---

## 📝 关键命令

### 确认用户名
```bash
# 在 ECS Terminal 中执行
whoami
```

### 添加公钥（推荐）
```bash
# 在 ECS Terminal 中执行（替换为你的公钥）
echo "ssh-rsa AAAAB3...你的公钥内容..." >> ~/.ssh/authorized_keys
chmod 600 ~/.ssh/authorized_keys
```

### 测试连接
```bash
# Windows PowerShell
ssh myserver

# 或使用 IP
ssh root@115.190.54.220
```

### Docker 控制
```bash
# 列出容器
python docker_remote.py -H myserver ps

# 查看日志
python docker_remote.py -H myserver logs container_name
```

---

## 🎯 最优配置流程（5分钟）

```
1. ECS Terminal 登录
   └─> whoami (确认用户)

2. 添加公钥
   └─> echo "公钥" >> ~/.ssh/authorized_keys
   └─> chmod 600 ~/.ssh/authorized_keys

3. 配置 SSH
   └─> 编辑 ~/.ssh/config
   └─> 使用确认的用户名

4. 测试
   └─> ssh myserver

5. 完成 ✅
```

---

## ⚠️ 必须避免的错误

```
❌ 假设用户名（应该先确认）
❌ 多次尝试密码登录（应该用密钥）
❌ 使用不熟悉的编辑器（应该用 echo）
❌ 忽略编码问题（应该提前处理）
```

---

## ✅ 最佳实践

```
✅ 先确认用户名再配置
✅ 使用 ECS Terminal 添加公钥（最可靠）
✅ 使用 echo 命令（最简单）
✅ 配置后立即测试
✅ 开发时考虑跨平台兼容
```

---

## 📚 相关文档

- 📖 详细分析: `配置总结与问题分析.md`
- 📊 流程图: `配置流程图可视化.md`
- 🔧 操作指南: `快速配置指南.md`

---

*快速参考 | 最后更新: 2026-01-07*

