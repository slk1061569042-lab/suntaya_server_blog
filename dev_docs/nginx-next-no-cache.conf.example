# Nginx 反向代理 Next.js 时关闭代理缓存（参考）
# 当「部署后直连 127.0.0.1:3000 已是新 Build，但浏览器访问域名仍是旧版」时，
# 检查站点配置是否启用了 proxy_cache；若启用，按下方关闭或单独对 HTML 不缓存。
#
# 用法：复制到服务器对应站点配置中，或合并到现有 location / 块，然后：
#   nginx -t && nginx -s reload

location / {
    proxy_pass http://127.0.0.1:3000;
    proxy_http_version 1.1;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_cache off;   # 关键：不缓存，每次请求转发到 Node
}
