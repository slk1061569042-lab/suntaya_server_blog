# SSH å¯†é’¥é…ç½®å¿«é€ŸæŒ‡å—

## ğŸ“‹ å½“å‰é…ç½®çŠ¶æ€

âœ… **IP åœ°å€å·²é…ç½®**: `115.190.54.220`  
âœ… **ç”¨æˆ·åå·²é…ç½®**: `ubuntu`  
âœ… **å…¬é’¥æ–‡ä»¶å·²å­˜åœ¨**: `C:\Users\Administrator\.ssh\id_rsa.pub`

## ğŸš€ å¿«é€Ÿé…ç½®æ­¥éª¤

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨è‡ªåŠ¨é…ç½®è„šæœ¬ï¼ˆæ¨èï¼‰

1. **è¿è¡Œ PowerShell è„šæœ¬**ï¼š
   ```powershell
   .\setup_ssh_key.ps1
   ```

2. **é€‰æ‹©é€‰é¡¹ 1**ï¼ˆè‡ªåŠ¨å¤åˆ¶ï¼‰ï¼Œç„¶åè¾“å…¥æœåŠ¡å™¨å¯†ç 

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨é…ç½®ï¼ˆå¦‚æœè‡ªåŠ¨æ–¹å¼å¤±è´¥ï¼‰

#### æ­¥éª¤ 1: æŸ¥çœ‹ä½ çš„å…¬é’¥å†…å®¹

ä½ çš„å…¬é’¥æ–‡ä»¶ä½ç½®ï¼š`C:\Users\Administrator\.ssh\id_rsa.pub`

å…¬é’¥å†…å®¹ï¼š
```
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+2DKZkwKze9u06ul2pIPwHkD3HoXgaAoFxzeGw6hCkmTHNivMzJhoenHbHS4bBTDZlbZJZ2fsSPOxNvrUKGE/yWr70LrEFYfFUhu1Mw3rkRDY0b2xaF9KvPCneBuJ7bWMcD1uLGML32/IUQwrN0iMVv9sKVLEN24iInWk0JIznsIR2db2v7l5zuh8FOnC1LnjlerMw+YkNlI+qSXUGoDrFYdSJnaqjJB0vfsJXjooUfxbfP1TUo+c/y/ksnKXR2Nma+wk50os/Z4JD7H/aJCuvS2129qcwwx5ZTu9nVCoBCyDRixtZfL/Zt076YcurxIl3FDrHKQQgSOtmG9z76mxMCYIY/vFHn/2AfEPqi0nrMycoYCBcuEYrPQico1p6DPULKC0j+AFKSail7cwNKdl5euY0eudPmB3DYA9TgCppB+u1IvhZUQTMXocGynqhF97Ft7fPDp/NTGjawxatq8Vj2LDm1dMINzed2shCrvFC7JjQiOXvwBSdJRQeJBSXCU= 1061569042@qq.com
```

#### æ­¥éª¤ 2: å°†å…¬é’¥æ·»åŠ åˆ°æœåŠ¡å™¨

**é€‰é¡¹ Aï¼šä½¿ç”¨ PowerShell å‘½ä»¤ï¼ˆæœ€ç®€å•ï¼‰**

åœ¨ PowerShell ä¸­æ‰§è¡Œï¼š
```powershell
Get-Content C:\Users\Administrator\.ssh\id_rsa.pub | ssh ubuntu@115.190.54.220 "mkdir -p ~/.ssh && chmod 700 ~/.ssh && cat >> ~/.ssh/authorized_keys && chmod 600 ~/.ssh/authorized_keys"
```

ç„¶åè¾“å…¥æœåŠ¡å™¨å¯†ç ã€‚

**é€‰é¡¹ Bï¼šæ‰‹åŠ¨ç™»å½•æœåŠ¡å™¨æ·»åŠ **

1. **ä½¿ç”¨å¯†ç ç™»å½•æœåŠ¡å™¨**ï¼š
   ```bash
   ssh ubuntu@115.190.54.220
   ```

2. **ç™»å½•åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤**ï¼š
   ```bash
   mkdir -p ~/.ssh
   chmod 700 ~/.ssh
   nano ~/.ssh/authorized_keys
   ```

3. **åœ¨ nano ç¼–è¾‘å™¨ä¸­**ï¼š
   - å°†ä¸Šé¢çš„å…¬é’¥å†…å®¹å®Œæ•´å¤åˆ¶ç²˜è´´è¿›å»
   - æŒ‰ `Ctrl + O` ä¿å­˜
   - æŒ‰ `Enter` ç¡®è®¤
   - æŒ‰ `Ctrl + X` é€€å‡º

4. **è®¾ç½®æ­£ç¡®çš„æƒé™**ï¼š
   ```bash
   chmod 600 ~/.ssh/authorized_keys
   exit
   ```

## âœ… éªŒè¯é…ç½®

é…ç½®å®Œæˆåï¼Œæµ‹è¯•è¿æ¥ï¼š

```bash
ssh myserver
```

å¦‚æœé…ç½®æˆåŠŸï¼Œåº”è¯¥å¯ä»¥ç›´æ¥ç™»å½•ï¼Œä¸éœ€è¦è¾“å…¥å¯†ç ã€‚

## ğŸ”§ å¦‚æœé‡åˆ°é—®é¢˜

### é—®é¢˜ 1: æç¤º "Permission denied"

- æ£€æŸ¥å…¬é’¥æ˜¯å¦æ­£ç¡®æ·»åŠ åˆ°æœåŠ¡å™¨çš„ `~/.ssh/authorized_keys`
- æ£€æŸ¥æ–‡ä»¶æƒé™ï¼š`chmod 600 ~/.ssh/authorized_keys`
- æ£€æŸ¥ç›®å½•æƒé™ï¼š`chmod 700 ~/.ssh`

### é—®é¢˜ 2: æç¤º "Host key verification failed"

- åˆ é™¤æ—§çš„ known_hosts æ¡ç›®ï¼š
  ```bash
  ssh-keygen -R 115.190.54.220
  ```

### é—®é¢˜ 3: éœ€è¦ç”Ÿæˆæ–°çš„å¯†é’¥å¯¹

å¦‚æœç§é’¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¿è¡Œï¼š
```powershell
ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
```

æŒ‰æç¤ºæ“ä½œï¼Œä½¿ç”¨é»˜è®¤è·¯å¾„å³å¯ã€‚

## ğŸ“ é…ç½®å®Œæˆå

é…ç½®æˆåŠŸåï¼Œä½ å°±å¯ä»¥ï¼š

1. **ç›´æ¥ SSH è¿æ¥**ï¼š
   ```bash
   ssh myserver
   ```

2. **ä½¿ç”¨ Docker æ§åˆ¶å·¥å…·**ï¼š
   ```bash
   python docker_remote.py -H myserver ps
   python docker_remote.py -H myserver logs container_name
   ```

## ğŸ”’ å®‰å…¨æç¤º

- âœ… ç§é’¥æ–‡ä»¶ (`id_rsa`) åº”è¯¥ä¿å¯†ï¼Œä¸è¦åˆ†äº«ç»™ä»–äºº
- âœ… å…¬é’¥æ–‡ä»¶ (`id_rsa.pub`) å¯ä»¥å®‰å…¨åœ°æ·»åŠ åˆ°æœåŠ¡å™¨
- âœ… å»ºè®®å®šæœŸæ›´æ¢å¯†é’¥å¯¹
- âœ… ç¡®ä¿æœåŠ¡å™¨çš„ `authorized_keys` æ–‡ä»¶æƒé™æ­£ç¡®ï¼ˆ600ï¼‰

